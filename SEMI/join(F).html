<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JOIN</title>

    <link rel="stylesheet" type="text/css" href="basic.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR&display=swap" rel="stylesheet">

    <style>
    html{
	font-family: 'Noto Sans KR', sans-serif;
    }
    .success-message,
    .fail-message{
        display: none;
    }
    /* .success-message{
        color: #6c7aef
    } */
    .fail-message{
        color: #eb6f7f
    }

    .input.success {
        border-color: #6c7aef;
    }
    .input.success ~ .success-message{
        display: block;
    }
    .input.fail ~ .fail-message{
        display: block;
    }
 
    </style>
   <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
   <script type="text/javascript">

        $(function(){

            var inputStatus = {
                memberIdValid:false,
                memberNickValid:false,
                memberEmailValid:false
            };

            //ID 
            $("input[name=memberId]").blur(function(){
                var memberId = $(this).val();

                if(!memberid)return;

                $.ajax({
                    url:"",
                    method:"get",
                    success:function(result){
                        if(result == "NO"){
                            $("input[name=memberId]").next("span").text("4~15자 이내 영문 소문자, 숫자를 입력해주세요.");
                            inputStatus.memberIdValid = true;
                        }
                    }

                });
            });


            //NICK
            $("input[name=memberNick]").blur(function(){
                var memberNick = $(this).val();
                var regex = /^[가-힣a-zA-Z0-9]{3,9}$/;
                var judge = regex.test(memberNick);
                $(this).removeClass("YES NO FAIL");
                if(judge){
                    var that = this; 

                    $.ajax({
                        url:"",
                        method:"post",
                        data:(
                          // url ? 뒤에 파라미터 이름 : var 이름 
                        ),
                        success:function(result){
                            if(result == "YES"){
                                $(that).addClass("YES");
                                inputStatus.memberNickValid = true;
                            }else if(result == "NO"){
                                $(that).addClass("NO");
                                inputStatus.memberNickValid = false;
                            }
                        },
                        error:function(){
                            // 오류 페이지로 고우.. 
                            window.location.href("오류페이지");

                        }
                    });
                }else{
                    $(this).addClass("FAIL");
                    inputStatus.memberNickValid = false; 
                }
            });

        });

        function checkNick(){
            var input = document.querySelector("input[name=memberNick]");
            var memberNick = input.value;
            var regex = /^[가-힣a-zA-Z0-9]{3,9}$/;
            var judge = regex.test(memberNick);

            input.classList.remove("success", "fail");
            if(judge){
                input.classList.add("success");
            }else{
                input.classList.add("fail");
            }
        }

        function checkPw(){
            var input = document.querySelector("input[name=memberPw]");
            var memberPw = input.value;
            var regex = /^[a-z0-9]{7,15}$/;
            var judge = regex.test(memberPw);

            input.classList.remove("success", "fail");
            if(judge){
                input.classList.add("success");
            }else{
                input.classList.add("fail");
            }
        }

        
        function checkPasswordRe(){
            var origin = document.querySelector("input[name=memberPw]");
            var repeat = document.querySelector("#password-check");

            var judge = origin.value == repeat.value;
            repeat.classList.remove("success", "fail");
            if(judge){
                repeat.classList.add("success");
            }else{
                repeat.classList.add("fail");
            }
        }
        
    </script>
</head>
<body>
    <div class="container-650">
        <div class="row center">
            <h1>회원 가입</h1>
            <h3>함께 해요, 좋은 습관 챌린지!</h3>
        </div>

        <form action="" method="post" autocomplete="off">

            <div class="row">
                <label>아이디</label>
                <input type="text" name="memberId" class="input short-text-box" id="text-box1">
                <!-- <span class="success-message">사용가능한 아이디입니다.</span> -->
                <span class="fail-message">4~15자 이내 영문 소문자, 숫자를 입력해주세요.</span>
            </div>

            <div class="row">
                <label>닉네임</label>
                <input type="text" name="memberNick" class="input short-text-box">
                <span class="fail-message">이미 사용중인 닉네임입니다. 4~10자 한글/영문/숫자로 입력해주세요.</span>
            </div>

            <div class="row">
                <label>비밀번호</label>
                <input type="password" name="memberPw" class="input short-text-box" onblur="checkPw();">
                <span class="fail-message">8~16자 이내 영문? 숫자 입력해주세요.</span>
            </div>

            <div class="row">
                <label>비밀번호 재확인</label>
                <input type="password" id="password-check" class="input short-text-box" onblur="checkPasswordRe();">
                <span class="fail-message">비밀번호를 다시 입력해주세요.</span>
            </div>

            <div class="row">
                <label>본인 확인 이메일
                    <h5>아이디/비밀번호 찾기에 사용됩니다.</h5>
                </label>
                <input type="email" name="memberEmail" class="short-text-box" >
                <span></span>
            </div>

            <div class="row">
                <h5>위 내용의 개인정보를 제공함에 동의합니다.</h5>
                <button type="submit" class="largebtn" id="largebutton1">회원가입</button>
            </div>
            <h5>이미 4weeks 계정이 있으신가요? <a href="#">로그인</a> </h5>
        </form>
    </div>
</body>
</html>