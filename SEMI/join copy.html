<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JOIN</title>

    <link rel="stylesheet" type="text/css" href="basic.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR&display=swap" rel="stylesheet">

    <style>
    div{
        border: 1px dotted gray;
    }
    html{
	font-family: 'Noto Sans KR', sans-serif;
    }
    .success-message,
    .fail-message{
        display: none;
    }
    /* .success-message{
        color: #6c7aef
    } */
    .fail-message{
        color: #eb6f7f
    }
    .input{
        cursor: pointer;
    }
    .input.success {
        border-color: #6c7aef;
    }
    .input.success ~ .success-message{
        display: block;
    }
    .input.fail ~ .fail-message{
        display: block;
    }
   
    .email-box{
        width: 70%;
    }
    .email-drop-box{
        width: 181px;
        height: 64px;
        padding: 3px;
    }

    </style>
    <script type="text/javascript">
        function checkId(){
            var input = document.querySelector("input[name=memberId]");
            var memberId = input.value;
            var regex = /^[a-z][a-z0-9]{3,14}$/;
            var judge = regex.test(memberId);

            input.classList.remove("success", "fail");
            if(judge){
                input.classList.add("success");
            }else{
                input.classList.add("fail");
            }
        }

        function checkNick(){
            var input = document.querySelector("input[name=memberNick]");
            var memberNick = input.value;
            var regex = /^[가-힣a-zA-Z0-9]{3,9}$/;
            var judge = regex.test(memberNick);

            input.classList.remove("success", "fail");
            if(judge){
                input.classList.add("success");
            }else{
                input.classList.add("fail");
            }
        }

        function checkPw(){
            var input = document.querySelector("input[name=memberPw]");
            var memberPw = input.value;
            var regex = /^[a-z0-9]{7,15}$/;
            var judge = regex.test(memberPw);

            input.classList.remove("success", "fail");
            if(judge){
                input.classList.add("success");
            }else{
                input.classList.add("fail");
            }
        }

        
        function checkPasswordRe(){
            var origin = document.querySelector("input[name=memberPw]");
            var repeat = document.querySelector("#password-check");

            var judge = origin.value == repeat.value;
            repeat.classList.remove("success", "fail");
            if(judge){
                repeat.classList.add("success");
            }else{
                repeat.classList.add("fail");
            }
        }

        // 이메일 검사 같은 경우 직접 입력 방법과 간접 입력 방법을 구분해야한다. 
        // 직접 입력의 경우는 @와 .이 있어야한다. 
        // 간접 입력의 경우는 아이디만 
        // if else 로 두개로 나눠서 만든다 ~~~~~~~~~~~

        function checkEmail(){
            var input = document.querySelector("input[name=memberEmail]");
            var memberEmail = input.value;
            var regex = /^[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*.[a-zA-Z]{2,3}$/i;
            var judge = regex.test(memberEmail);
            let regex = new RegExp("([!#-'*+/-9=?A-Z^-~-]+(\.[!#-'*+/-9=?A-Z^-~-]+)*|\"\(\[\]!#-[^-~ \t]|(\\[\t -~]))+\")@([!#-'*+/-9=?A-Z^-~-]+(\.[!#-'*+/-9=?A-Z^-~-]+)*|\[[\t -Z^-~]*])");
            let testEmails = ["notanemail.com", "workingexample@stackabuse.com", "example@yale.edu.com"];
            testEmails.forEach((address) => {
                console.log(regex.test(address))
            });

            input.classList.remove("success", "fail");
            if(judge){
                input.classList.add("success");
            }else{
                input.classList.add("fail");
            }
            
        }
        
    </script>
</head>
<body>
    <div class="container-650">
        <div class="row center">
            <h1>회원 가입</h1>
            <h3>함께 해요, 좋은 습관 챌린지!</h3>
        </div>

        <form action="" method="post" autocomplete="off">

            <div class="row">
                <label>아이디</label>
                <input type="text" name="memberId" class="input short-text-box" id="text-box1" onblur="checkId();" placeholder="4~15자의 영문/숫자">
                <span class="fail-message">4~15자 이내 영문 소문자, 숫자를 입력해주세요.</span>
            </div>

            <div class="row">
                <label>닉네임</label>
                <input type="text" name="memberNick" class="input short-text-box" onblur="checkNick();" placeholder="4~10자의 한글/영문/숫자">
                <span class="fail-message">4~10자 한글/영문/숫자로 입력해주세요.</span>
            </div>

            <div class="row">
                <label>비밀번호</label>
                <input type="password" name="memberPw" class="input short-text-box" onblur="checkPw();" placeholder="8~16자의 영문/숫자">
                <span class="fail-message">8~16자 이내 영문? 숫자 입력해주세요.</span>
            </div>

            <div class="row">
                <label>비밀번호 재확인</label>
                <input type="password" id="password-check" class="input short-text-box" onblur="checkPasswordRe();">
                <span class="fail-message">비밀번호를 다시 입력해주세요.</span>
            </div>

            <!--  select 좀 늘려야하는데 어캐 늘려 ? .. -->
            <div class="row">
                <label>본인 확인 이메일
                    <h5>아이디/비밀번호 찾기에 사용됩니다.</h5>
                </label>
                <input type="email" name="memberEmail" class="short-text-box email-box" onblur="checkEmail();" placeholder="이메일">
                <select class="dropdown dropdown-check email-drop-box">
                    <option selected="selected" value="1">직접 입력</option>
                    <option value="naver.com">@naver.com</option>
                    <option value="google.com">@google.com</option>
                    <option value="hanmail.net">@hanmail.net</option>
                    <option value="nate.com">@nate.com</option>
                    <option value="kakao.com">@kakao.com</option>
                </select>
                <span class="fail-message">유효하지 않은 이메일 주소 입니다.</span>
            </div>

            <!-- 마지막은 로그인 페이지로 연결 ~  -->
            <div class="row center">
                <h5>위 내용의 개인정보를 제공함에 동의합니다.</h5>
                <button type="submit" class="largebtn w-100" id="largebutton1">회원가입</button>
            </div>
            <div class="row center">
                <h5>이미 4weeks 계정이 있으신가요? <a href="#">로그인</a></h5>
            </div>
        </form>
    </div>
</body>
</html>