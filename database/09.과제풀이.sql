
DROP TABLE CUSTOMER;
DROP SEQUENCE CUSTOMER_SEQ;
CREATE TABLE CUSTOMER  (
CUSTOMER_NO NUMBER NOT NULL UNIQUE,
CUSTOMER_ID VARCHAR2(20) NOT NULL UNIQUE
    CHECK(REGEXP_LIKE(CUSTOMER_ID, '^[a-z0-9]{8,20}$')),
CUSTOMER_PHONE CHAR(13) NOT NULL UNIQUE
    CHECK(REGEXP_LIKE(CUSTOMER_PHONE, '^010-\d{4}-\d{4}$')),
CUSTOMER_REGIST CHAR(10) NOT NULL
    CHECK(REGEXP_LIKE(CUSTOMER_REGIST, '^(19|20)\d{2}-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])$')),
CUSTOMER_PURCHASE CHAR(10) NOT NULL
    CHECK(REGEXP_LIKE(CUSTOMER_PURCHASE, '^(19|20)\d{2}-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])$')),
CUSTOMER_MILEAGE NUMBER DEFAULT 0
    CHECK(CUSTOMER_MILEAGE >= 0),
CUSTOMER_GRADE VARCHAR2(12) DEFAULT '일반' NOT NULL
    CHECK(CUSTOMER_GRADE IN ('일반', 'VIP', 'VVIP', '플래티넘'))
);

CREATE SEQUENCE CUSTOMER_SEQ;

INSERT INTO CUSTOMER(
    CUSTOMER_NO, CUSTOMER_ID, CUSTOMER_PHONE,
    CUSTOMER_REGIST, CUSTOMER_PURCHASE, CUSTOMER_MILEAGE,
    CUSTOMER_GRADE
)
VALUES(
    CUSTOMER_SEQ.NEXTVAL, 'testuser1', '010-1212-3434', 
    '2022-01-01', '2022-03-11', 5500, 'VIP'
);

INSERT INTO CUSTOMER(
    CUSTOMER_NO, CUSTOMER_ID, CUSTOMER_PHONE,
    CUSTOMER_REGIST, CUSTOMER_PURCHASE, CUSTOMER_MILEAGE,
    CUSTOMER_GRADE
)
VALUES(
    CUSTOMER_SEQ.NEXTVAL, 'testuser2', '010-2323-4545', 
    '2020-05-11', '2022-01-30', 7200, 'VVIP'
);

INSERT INTO CUSTOMER(
    CUSTOMER_NO, CUSTOMER_ID, CUSTOMER_PHONE,
    CUSTOMER_REGIST, CUSTOMER_PURCHASE, CUSTOMER_MILEAGE,
    CUSTOMER_GRADE
)
VALUES(
    CUSTOMER_SEQ.NEXTVAL, 'testuser3', '010-3434-5656', 
    '2021-11-26', '2021-12-25', 30000, '플래티넘'
);

INSERT INTO CUSTOMER(
    CUSTOMER_NO, CUSTOMER_ID, CUSTOMER_PHONE,
    CUSTOMER_REGIST, CUSTOMER_PURCHASE, CUSTOMER_MILEAGE,
    CUSTOMER_GRADE
)
VALUES(
    CUSTOMER_SEQ.NEXTVAL, 'testuser4', '010-4545-6767', 
    '2022-02-03', '2022-03-15', 500, '일반'
);

INSERT INTO CUSTOMER(
    CUSTOMER_NO, CUSTOMER_ID, CUSTOMER_PHONE,
    CUSTOMER_REGIST, CUSTOMER_PURCHASE, CUSTOMER_MILEAGE,
    CUSTOMER_GRADE
)
VALUES(
    CUSTOMER_SEQ.NEXTVAL, 'testuser5', '010-5656-7878', 
    '2021-12-31', '2022-01-31', 800, '일반'
);

commit;

select * from customer;


